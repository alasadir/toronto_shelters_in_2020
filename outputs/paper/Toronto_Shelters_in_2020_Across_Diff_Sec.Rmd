---
title: "Toronto Shelters in 2020 Across Different Sectors"
author: "Reem Alasadi"
date: "4/2/2021"
output: pdf_document
abstract: "The City of Toronto has 56 shelters in 4 cities for different sectors. In this study, I want to see which sectors were impacted by COVID-19 the most during 2020, by filtering shelters' capacities and occupancies. The usage of shelters is plotted as a histogram to see its status over the year. I conclude that ..."
bibliography: "references.bib"
---

# Introduction

There are 56 shelters that can accommodate people at the City of Toronto. The City funds and coordinates services between the Shelter, Support & Housing Administration division and community agencies and stakeholders to provide housing and homelessness services to vulnerable people. In their website, they mention that their services include "emergency shelter and supports, street outreach, 24-hour respite, [and] housing stability services", like eviction prevention for example [@TorontoCity]. The city has target of 90% occupancy in all emergency shelters for sectors [@aliNron], but how can the system accommodate more people in times of need (like severe weather conditions, or a pandemic for example) when it is functioning at near full capacity?

According to the City of Toronto's website, an initiative of more than 40 temporary housing programs have been put forward in temporary locations to accommodate physical distancing measures in shelters. 25 out of 40 are currently activated [@TorontoShelters].

But is that enough? Looking at 2020 data will help identify which sectors were the most impacted during the pandemic.

# Method

The dataset will be explored using R [@citeR] and packages like `dplyr` [@dplyr], `janitor` [@janitor], `tidyverse` [@tidy], and `ggplot` [@gg]. Inspiration was drawn from Professor Rohan Alexander's exploratory pursuit on Toronto Shelters [@alexander2021shelter].

# Dataset Description

## Data Source

The dataset is published by the Shelter, Support & Housing Administration division under the City of Toronto [@dataset]. It provides a daily report of the use of shelters in the City of Toronto. The report is generated by Shelter Management Information System, which captures data for a day at 4:00 am the following day [@TorontoShelters]. It updates every second day of the month to include data about the previous month. Thus, it was last updated on February 2. The dataset is imported through `OpenDataToronto` which makes datasets publicly available [@openDataToronto]. 

## Dataset Limitations

 

## Ethical Considerations

A potential bias might affect the data as information regarding Violence Against Women shelters is removed for confidentiality [@TorontoShelters].

## Toronto Shelters in 2020

The dataset has 41,061 observations and 12 variables.

- Comprehensively describe and summarize the data using text and at least one graph and one table. 
  
  - Graphs must be made in ggplot (Wickham 2016), and
  
  - tables must be made using knitr::kable() (with or without kableExtra) or gt (Iannone, Cheng, and Schloerke 2020b)

- Make sure to cross-reference graphs and tables.


```{r, echo=FALSE, include=FALSE}
#setting up 
library(opendatatoronto)
library(tidyverse)
library(kableExtra)
```

```{r, echo = FALSE}
#importing the dataset
all_data <-
  opendatatoronto::search_packages("Daily Shelter Occupancy") %>%
  opendatatoronto::list_package_resources() %>%
  dplyr::filter(name %in% c("daily-shelter-occupancy-2020.csv")) %>%
  group_split(name)%>%
  map_dfr(get_resource)
```

```{r, echo=FALSE}
#saving it to a local repo
write_csv(all_data, "C:/Users/Reem/Documents/INF2178 Experimental Design/Homelessness_in_Toronto_in_2020/toronto_shelters_in_2020/inputs/data/raw_data.csv")
```

The column names are as follows:

```{r, echo=FALSE}
names(all_data)
```
There are 5 sectors that I'm interested in exploring:

```{r, echo=FALSE}
unique(all_data$SECTOR)
```

I'm curious about what 'SHELTER_CITY' column includes. It is supposed to have all shelters are in Toronto ... so let's investigate:

```{r, echo=FALSE}
unique(all_data$SHELTER_CITY)
```

So the column just lists different parts within Toronto.

Moving on.

I'm interested in seeing the traffic to the shelters by different sectors throughout 2020. It's worth noting that a lock-down was enforced because of COVID-19 mid-March. So I expect to see a downfall from March onward due to social-distancing laws. We'll start by comparing:



then plotting occupancy rates over the year:


```{r, echo=FALSE, include=FALSE}
#cleaning data
all_data %>%
  tidyr::drop_na() %>%
  janitor::clean_names()
```
```{r, echo=FALSE}
#changing "occupancy_date" data type to date
all_data$OCCUPANCY_DATE <- as.Date(all_data$OCCUPANCY_DATE)
```

```{r, echo=FALSE}
#selecting specific columns to work with
toronto_shelters <- all_data %>%
  group_by(OCCUPANCY_DATE, SECTOR) %>%
  summarise(occupancy = sum(OCCUPANCY),
            capacity = sum(CAPACITY),
            usage = OCCUPANCY / CAPACITY,
            .groups = "drop") %>%
  tidyr::drop_na()
```

Plotting the data will give a better understanding:

```{r, echo=FALSE, fig.cap="Shelter Occupancy in 2020 for Different Sectors"}
#plotting data
ggplot(toronto_shelters,
       aes(x = OCCUPANCY_DATE, y = occupancy, color = SECTOR)) +
  geom_point() +
  ggtitle("Toronto Shelter Occupancy in 2020") +
  labs(x = "Date", y = "Occupancy")
```

\pagebreak

# References
