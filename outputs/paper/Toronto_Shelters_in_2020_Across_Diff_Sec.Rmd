---
title: "Families are the Most Impacted Sector in Toronto Shelters in 2020"
author: "Reem Alasadi"
date: "February 4, 2021"
output: pdf_document
abstract: "The City of Toronto has 56 shelters for different sectors. In this study, I want to see which sectors were impacted by COVID-19 the most during 2020. Through data visualization, I conclude that the family sector was the most impacted by the pandemic and lockdown."
bibliography: "references.bib"
GitHub: 'https://github.com/alasadir/toronto_shelters_in_2020.git'
---

# Introduction

There are 119 programs working in 56 shelters that can accommodate people in need of a shelter at the City of Toronto. The City funds and coordinates services between the Shelter, Support & Housing Administration division and community agencies and stakeholders to provide housing and homelessness services to vulnerable people. In their website, they mention that their services include "emergency shelter and supports, street outreach, 24-hour respite, [and] housing stability services", like eviction prevention for example [@TorontoCity]. The city has a target of 90% occupancy in all emergency shelters for each sector [@aliNron], but how can the system accommodate more people in times of need (like severe weather conditions, or a pandemic for example) when it is functioning at near full capacity?

According to the City of Toronto's website, an initiative of more than 40 temporary housing programs have been put forward in temporary locations to accommodate physical distancing measures in shelters. Twenty-five out of 40 are currently activated [@TorontoShelters]. But is that enough? Looking at 2020 shelters' data will help identify which sectors were impacted the most during the pandemic. From there, I will be able to find out.

# Method

The dataset will be explored using R [@citeR] and packages like `dplyr` [@dplyr], `janitor` [@janitor], `tidyverse` [@tidy], `lubridate` [@lubr], and `ggplot` [@gg]. Inspiration was drawn from Professor Rohan Alexander's exploratory pursuit on 'Shelter usage in Toronto (2017-2021)' [@alexander2021shelter].

# Dataset Description

## Data Source

The dataset is published by the Shelter, Support & Housing Administration division under the City of Toronto [@dataset]. It provides a daily report of the use of shelters in the city. The report is generated by Shelter Management Information System, which captures data at 4:00 am each day [@TorontoShelters]. The report was last updated on February 2, as it updates every second day of the month to include data about the previous month. The dataset is imported through `OpenDataToronto` which makes datasets publicly available [@openDataToronto]. 

## Ethical Considerations

A potential bias might affect the data as information regarding Violence Against Women shelters is removed for confidentiality [@TorontoShelters].

## Toronto Shelters in 2020

```{r, echo=FALSE, include=FALSE}
#setting up 
library(opendatatoronto)
library(tidyverse)
library(kableExtra)
library(lubridate)
```

```{r, echo = FALSE}
#importing the dataset
all_data <-
  opendatatoronto::search_packages("Daily Shelter Occupancy") %>%
  opendatatoronto::list_package_resources() %>%
  dplyr::filter(name %in% c("daily-shelter-occupancy-2020.csv")) %>%
  group_split(name)%>%
  map_dfr(get_resource)
```

```{r, echo=FALSE}
#saving it to a local repo
write_csv(all_data, "raw_data.csv")
```

The dataset initially has 41,061 observations and 12 variables, but after some data-cleaning, it now contains 16,167 observations and 12 variables. The columns are as follows:

```{r, echo=FALSE}
names(all_data)
```

Before we begin, I am curious about what 'SHELTER_CITY' column includes. It caught my eye because all shelters should be _in_ Toronto. So let's investigate:

```{r, echo=FALSE}
unique(all_data$SHELTER_CITY)
```

So the column just lists different cities within Toronto. Moving on.

The dataset contains 5 sectors that I'm interested in exploring:

```{r, echo=FALSE}
unique(all_data$SECTOR)
```

I will start by plotting the traffic to the shelters by different sectors throughout 2020. As mentioned earlier, the lock-down was enforced around mid-March, so I am expecting to see a decrease in shelter usage from March onward due to physical-distancing measures. 

```{r, echo=FALSE, include=FALSE}
#cleaning data
all_data_cleaned <- all_data %>%
  tidyr::drop_na() %>%
  janitor::clean_names()
```

```{r, echo=FALSE}
#changing "occupancy_date" data type to date
all_data_cleaned$occupancy_date <- as.Date(all_data_cleaned$occupancy_date)
```

```{r, echo=FALSE}
#selecting specific columns to work with
toronto_shelters <- all_data_cleaned %>%
	mutate(occupancy_month = lubridate::month(occupancy_date, label = TRUE)) %>% 
	group_by(occupancy_month, sector) %>%
	summarise(occupancy = sum(occupancy),
		capacity = sum(capacity),
        usage = occupancy / capacity,
        .groups = "drop")
```

```{r, echo=FALSE, fig.cap="Shelter Occupancy in 2020 for Different Sectors"}
#plotting data
ggplot(toronto_shelters,
       aes(x = occupancy_month, y = usage, color = sector)) +
  geom_point() +
  ggtitle("Toronto Shelter Occupancy in 2020") +
  labs(x = "Month", y = "Usage")
```
All sectors seem to generally maintain their average shelter usage throughout the year. The families sector was the most impacted sector.

```{r, echo=FALSE}
#Family data
toronto_shelters_Families <- filter(all_data_cleaned, sector == 'Families') %>%
	mutate(occupancy_month = lubridate::month(occupancy_date, label = TRUE, abbr = FALSE)) %>% 
	group_by(occupancy_month, sector) %>%
	summarise(occupancy = sum(occupancy),
		capacity = sum(capacity),
        usage = occupancy / capacity,
        .groups = "drop")
```

```{r, echo=FALSE, include=FALSE}
summary(toronto_shelters_Families)
```
```{r, echo=FALSE, }
family_summary_table <- toronto_shelters_Families%>%
  summarise(
    Sector = "Family",
    Max_Usage = max(toronto_shelters_Families$usage)* 100,
    Min_Usage = min(toronto_shelters_Families$usage)*100,
    Difference = (max(toronto_shelters_Families$usage) - min(toronto_shelters_Families$usage))* 100)
```

\pagebreak

```{r, echo=FALSE,results='asis', fig.cap=""}
family_summary_table %>%
  knitr::kable(caption = "Family Sector's Usage (in percentages)", digits = 2) %>%
  kableExtra::kable_styling()
```

It experienced a gradual drop of ~ 3% in shelter usage from January to December. To put this in context, that is almost equivalent to 816 people. It is unknown where these people have gone. I am hopeful that they do not need temporary housing anymore and that they have found permanent residence, because any other possibility is horrifying.

\pagebreak

# References
